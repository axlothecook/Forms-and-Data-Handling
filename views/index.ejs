<!DOCTYPE html>
<html>
<head>
  <title><%= title %></title>
  <link rel="stylesheet" href="/general.css"/>
  <link rel="stylesheet" href="/indexStyle.css"/>
</head>
<body>
  <div id="wrapper">
    <div class="top-div"><h1><%= title %></h1><a href="/create">Create a user</a></div>
    <ul>
      <% if (locals.users) {%>
        <% users.forEach(user => { %>
          <li>
            <h3><b>ID:</b> <%= user.id %></h3>
            <h3><b>Name:</b> <%= user.firstName %> <%= user.lastName %></h3>
            <h3><b>Email:</b> <%= user.email %></h3>
            <% if (user.age) { %>
              <h3><b>Age:</b> <%= user.age %></h3>
            <% } %>
            <% if (user.bio) { %>
              <h3><b>About me:</b> <%= user.bio %></h3>
            <% } %>
            <div class="bottom-div">
              <a href="/<%= user.id %>/update">Update</a>
              <form action="/<%= user.id %>/delete" method="POST" style="display:inline;">
                <button type="submit" onclick="return confirm('Are you sure you want to delete this user?');">Delete</button>
              </form>
            </div>
          </li>
        <% }); %>
      <% } %>
    </ul>
  </div>

  <div id="search-form-div">
    <%- include('partials/errors.ejs') %>
    <form action="/search" method="GET">
      <h2>Search for a user</h2>
      <label for="searchedName"><h3>Enter name:</h3></label>
      <input type="text" name="searchedName" autocomplete="off">
      <label for="searchedEmail"><h3>Enter email:</h3></label>
      <input type="email" name="searchedEmail" autocomplete="off">
      <button type="submit" id="submitSearch">Submit</button>
    </form>
  </div>

</body>
</html>